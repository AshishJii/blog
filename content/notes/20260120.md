---
title: "daily notes"
date: 2026-01-20
---

## WordPress Core Architecture and Request Lifecycle

WordPress is a dynamic Content Management System (CMS) powered by PHP and backed by a MySQL or MariaDB database. Understanding the path a request takes from the server to the browser is essential for high-performance development.

### 1. The Request Pathway

When a user accesses a URL on a WordPress site, the following sequence occurs:

* **Initialization:** The `index.php` file in the root directory loads `wp-blog-header.php`, which subsequently triggers `wp-load.php`.
* **Configuration:** The `wp-config.php` file is parsed to establish database connections, set memory limits, and define security constants.
* **Core Loading:** WordPress loads the core files in `wp-includes/`, initializes the plugin environment, and then loads the active theme.
* **The Query:** The `WP_Query` class parses the URL to determine what content is being requested (e.g., a single post, a category archive, or a custom post type).
* **Template Hierarchy:** WordPress selects the most specific template file available in the theme (e.g., `single-post.php` before `single.php` before `index.php`) based on the Template Hierarchy.
* **The Loop:** The selected template executes "The Loop," fetching data from the database and rendering the HTML output.

### 2. File and Directory Structure

* **`wp-admin/`:** Contains the administrative dashboard logic. Core files here should never be modified.
* **`wp-includes/`:** The library folder containing the majority of WordPress core functions, classes (like `WP_Query`, `WP_Error`), and APIs.
* **`wp-content/`:** The only directory where developers should actively add files.
* `/plugins/`: Individual folders for site functionality.
* `/themes/`: Folder for the active design and layout templates.
* `/uploads/`: Media and file assets.



---

## The Hook System: Actions and Filters

The "Hook" system is the mechanism that makes WordPress extensible without modifying core files. This is the foundation of professional plugin and theme development.

### 1. Action Hooks (`do_action`)

Actions allow you to "hook" into a specific point in the execution to perform a task. They represent events.

* **Common Hooks:** `init`, `wp_enqueue_scripts`, `wp_head`, `save_post`, `template_redirect`.
* **Usage:** Used for sending emails, registering custom post types, or inserting tracking scripts.

### 2. Filter Hooks (`apply_filters`)

Filters allow you to intercept and modify data before it is saved to the database or rendered to the screen.

* **Rule:** A filter **must** return the value it receives, even if it does not modify it.
* **Common Hooks:** `the_content`, `excerpt_length`, `body_class`, `wp_title`.

---

## Database Schema and Content Modeling

WordPress uses a normalized relational database. As of 2026, the schema remains highly stable but requires careful handling to maintain performance on large-scale sites.

### 1. Primary Tables

* **`wp_posts`:** The central table for all content. It stores Posts, Pages, Attachments, and Custom Post Types.
* **`wp_postmeta`:** A key-value pair table that stores metadata for entries in `wp_posts`. Overusing this for complex queries can lead to significant performance degradation.
* **`wp_options`:** Stores site-wide settings. The `autoload` column determines if a setting is loaded on every page request.
* **`wp_users` & `wp_usermeta`:** Manage user profiles, capabilities, and authentication data.

### 2. Custom Post Types (CPT) and Taxonomies

For structured data that does not fit the "Post" or "Page" model (e.g., Portfolio items, Team members, or Products), developers register CPTs.

* **Taxonomies:** Used to group CPTs. "Categories" and "Tags" are the default taxonomies, but you can create custom ones (e.g., "Skill Level" for a Portfolio).

---

## Security and Data Integrity

Security in WordPress development follows a strict "Trust No One" policy regarding input and output.

### 1. The Developer's Mantra

1. **Validate:** Check if the data is the correct type (e.g., `is_email()`, `intval()`).
2. **Sanitize:** Clean the data before saving to the database (e.g., `sanitize_text_field()`, `sanitize_hex_color()`).
3. **Escape:** Clean the data before outputting to HTML (e.g., `esc_html()`, `esc_url()`, `esc_attr()`).

### 2. Nonce Verification

Nonces (Numbers used once) are cryptographic tokens used to verify that a request was intentionally made by a specific user. They protect against Cross-Site Request Forgery (CSRF) attacks.

---

## The Modern WordPress Stack

### 1. Headless WordPress and the REST API

WordPress is increasingly used as a "Headless" CMS, where it acts only as a backend content repository.

* **REST API:** Provides JSON endpoints for all site data.
* **Decoupled Frontends:** Using frameworks like React, Vue, or Next.js to fetch data via the API while using WordPress only for content management.

### 2. WP-CLI

The WordPress Command Line Interface is essential for automation and DevOps workflows.

* **Database Migrations:** `wp search-replace 'oldsite.com' 'newsite.com'`
* **Scaffolding:** `wp scaffold plugin my-new-plugin`
* **Maintenance:** `wp transient delete --all`

---
